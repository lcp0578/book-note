## 第14章 云原生架构设计理论与实践
#### 14.1 云原生架构产生背景
- 主要表现
	- 从为企业带来的价值来看，云原生架构有着以下优势
		- 通过对多元算力的支持，满足不同应用场景的个性化算力需求，并给予软硬协同架构，为应用提供极致性能的云原生算力；
		- 基于多云治理和边云协同，打造高效、高可靠的分布式泛在计算平台，并构建包括容器、裸机、虚拟、函数等多种形态的统一计算资源；
		- 以“应用”为中心打造高效的资源调度和管理平台，为企业提供一键式部署、可感知应用的智能化调度，以及全访问监控与运维能力。
	- 通过最新的DevSecOps应用开发模式，实现了应用的敏捷开发，提升业务应用的迭代速度，告诉响应用户需求，并保证全流程安全。对于服务的集成提供侵入和非侵入两种模式辅助企业应用架构升级，同事实现新老应用的邮寄协同，立而不破。
	- 帮助企业管理好数据，快速构件数据运营能力，实现数据的资产化沉淀和价值挖掘，并借助一系列AI技术，再次赋能给企业应用，结合数据和AI的能力帮助企业实现业务的智能升级。
	- 结合云平台全方位企业级安全服务和安全合规能力，保障企业应用在云上安全构建，业务安全运行。
#### 14.2 云原生架构内涵
- 从技术的角度，云原生架构是基于云原生技术的一组架构原则和设计模式的集合，旨在将云应用中的非业务代码部分进行最大化的剥离，从而让云设施接管应用中原有的大量非功能特性（如弹性、韧性、安全、可观测性、灰度等），使业务不再有非功能性业务中断困扰的同时，具备轻量、敏捷、高度自动化的特点。
- 代码结构发生巨大变化
- 非功能性特性大量委托
- 高度自动化的软件交付
- 云原生架构原则
	- 服务化原则
	- 弹性原则
	- 可观测原则
	- 韧性原则
	- 所有过程自动化原则
	- 零信任原则
	- 架构持续演进原则
- 主要架构模式
	- 服务化架构模式
	- Mesh化架构原则
	- Serverless模式
		- Serverless非常适合于事件驱动的数据计算任务、计算时间短的请求/响应应用、没有复杂相互调用的长周期任务。
	- 存储计算分离模式
	- 分布式事务模式
	- 可观测架构
		- 包括三个方面
			- Logging:提供多个级别(verbose/debug/warning/error/fatal)的详细信息跟踪，由应用开发者主动提供；
			- Tracing:提供一个请求从前端到后端的完整调用链路跟踪，对于分布式场景尤其有用；
			- Metrics:提供对系统量化的多维度度量。
	- 事件驱动架构
		- 事件驱动架构(EDA, Event Driven Architecture)本质上是一种应用/组件间的集成架构模式。
#### 14.3 云原生架构相关技术
- 容器技术
	- 容器编排
		- Kubernetes提供了分布式应用管理的核心能力
			- 资源调度：根据应用请求的资源量 CPU、Memory，或者GPU等设备资源，在集群中选择合适的节点来运行应用。
			- 应用部署与管理：支持应用的自动发布与应用的回滚，以及与应用相关的配置的管理；也可以自动化存储卷的编排，让存储卷与容器应用的生命周期相关联。
			- 自动修复：Kubernetes能监测这个集群中所有的宿主机，当宿主机或者OS出现故障，节点健康检查会自动进行应用迁移；K8s也支持应用的自愈，极大简化了运维管理的复杂性。
			- 服务发现与负载均衡：通过Service资源出现各种应用服务，结合DNS和多种负责均衡机制，支持容器化应用之间的相互通信。
			- 弹性伸缩：K8s可以检测业务上所承担的负载，如果这个业务本身CPU利用率过高，或者响应时间过长，它可以对这个业务进行自动扩容。
- 云原生微服务
	- 服务网格
		- Istio
#### 14.4 云原生架构案例分析
