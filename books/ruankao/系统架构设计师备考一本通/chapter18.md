## 第18章 案例专题三：数据库系统
- ORM技术	
	- ORM的优点
		- 使用ORM可以大大降低学习和开发成本。
		- 程序员不用再写SQL来进行数据库操作。
		- 减少程序的代码量。
		- 降低由于SQL代码质量差而带来的影响。
	- ORM的缺点
		- 不太容易处理复杂查询语句。
		- 性能较直接用SQL差。
- 数据库分类比较
	- 关系型数据库和NoSQL比较
	<table>
			<tr>
				<th>特征</th>
				<th>关系型数据库模式</th>
				<th>NoSQL模式</th>
			</tr>
			<tr>
				<td>并发支持</td>
				<td>支持并发、效率低</td>
				<td>并发性能高</td>
			</tr>
			<tr>
				<td>存储于查询</td>
				<td>关系表方式存储、SQL查询</td>
				<td>海量数据存储、查询效率高</td>
			</tr>
			<tr>
				<td>扩展方式</td>
				<td>向上扩展</td>
				<td>向外扩展</td>
			</tr>
			<tr>
				<td>索引方式</td>
				<td>B树、哈希等</td>
				<td>键值索引</td>
			</tr>
			<tr>
				<td>应用领域</td>
				<td>面向通用领域</td>
				<td>特定应用领域</td>
			</tr>
			<tr>
				<td>数据一致性</td>
				<td>实时一致性</td>
				<td>弱一致性</td>
			</tr>
			<tr>
				<td>数据类型</td>
				<td>结构化数据</td>
				<td>非结构化</td>
			</tr>
			<tr>
				<td>事务</td>
				<td>高事务性</td>
				<td>弱事务性</td>
			</tr>
			<tr>
				<td>水平扩展</td>
				<td>弱</td>
				<td>强</td>
			</tr>
			<tr>
				<td>数据容量</td>
				<td>有限数据</td>
				<td>海量数据</td>
			</tr>
	</table>
	- 内存数据库和关系型数据库比较
		<table>
			<tr>
				<th></th>
				<th>主要数据模型</th>
				<th>读写性能</th>
				<th>存储容量</th>
				<th>可靠性</th>
			</tr>
			<tr>
				<td>内存数据库</td>
				<td>Key-Value模式（键-值对模式）</td>
				<td>内存直接读写，性能相对较高</td>
				<td>基于内存存储，存储容量受限</td>
				<td>恢复机制复杂，可靠性较低</td>
			</tr>
			<tr>
				<td>关系型数据库</td>
				<td>关系模式</td>
				<td>外存读写</td>
				<td>基于存盘存储，存储容量大</td>
				<td>内建恢复机制，可靠性较高</td>
			</tr>
		</table>
	- 关系型数据库和文件系统比较
	<table>
			<tr>
				<th></th>
				<th>设计难度</th>
				<th>数据冗余程度</th>
				<th>数据结构</th>
				<th>应用扩展性</th>
			</tr>
			<tr>
				<td>关系型数据库</td>
				<td>针对特定应用系统设计，难度较大</td>
				<td>遵守数据库范式，数据冗余较小</td>
				<td>以数据库为中心组织，管理数据</td>
				<td>数据库独立于应用系统，数据库系统接口标准化，易于在不同应用之间共享数据</td>
			</tr>
			<tr>
				<td>文件系统</td>
				<td>针对特定应用系统设计，难度较小</td>
				<td>可能存在多个文件中复制相同的数据属性，数据冗余较大</td>
				<td>以应用为中心管理数据</td>
				<td>符合特定应用系统要求的文件数据很难在不同应用系统之间共享</td>
			</tr>
		</table>
- 并发控制
	- 丢失更新
	- 不可重复度
	- 读脏数据
- 封锁协议
	- X锁是排他锁（写锁）
	- S锁是共享锁（读锁）
- 不规范化带来的四大问题
	- 数据冗余
	- 修改异常
	- 插入异常
	- 删除异常
- 反规范化技术
	- 增加冗余列
	- 增加派生列
	- 重新组表
	- 水平分割表
	- 垂直分割表
- 分布式数据库
	- 具有如下特点
		- 数据独立性
		- 集中与自治共享结合的控制结构
		- 适当增加数据冗余度
		- 全局一致性、可串行行和可恢复性
- 数据仓库吉成
	- 数据仓库集成是把多种来源的数据集中在一起，建立数据仓库，所有数据都驻留在单个数据库服务器上，配置大型处理器和存储容量。
	- 数据仓库主要用于决策支持，在数据处理过程中强调分析。
	- 其特点
		- 集成的数据
		- 面向主题
		- 数据相对稳定
		- 包含历史信息
	- 数据仓库的结构通常包含4个层次：
		- 数据源
		- 数据的存储于管理
		- OLAP（联机分析处理）服务器
		- 前端工具