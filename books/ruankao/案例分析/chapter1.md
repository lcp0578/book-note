## 1 软件架构设计
#### 质量属性效用树、质量属性判断
- 1、**性能**：指系统的响应能力，即要经过多长时间才能对某个事件作出响应，或者在某段时间内系统所能处理的事件的个数。如响应时间、吞吐量。
	- 设计策略：优先级队列、增加计算资源、减少计算开销、引入并发机制、采用资源调度等。
- 2、**可靠性**：是软件系统在应用或系统错误面前，在意外或错误使用的情况下维持软件系统的功能特性的基本能力。如MTTF、MTBF。
	- 设计策略：心跳、Ping/Echo、冗余、选举。
	- MTTF：Mean Time To Failuer，平均无故障时间。指系统无故障运行的平均时间，取所有从系统开始正常运行到发生故障之间的时间段的平均值。
	- MTBF：Mean Time Between Failure,平均失效间隔。指系统两次故障发生时间之间的时间段的平均值。
	- MTTR：Mean Time To Repair,平均修复时间。指系统从发生故障到维修结束之间的时间段的平均值。
	- MTBF = MTTF + MTTR
- 3、**可用性**：是系统能够正常运行的时间比例，经常用两次故障之间的时间长度或在出现故障时系统能够恢复正常的速度来表示。如故障间隔时间。
	- 设计策略：心跳、Ping/Echo、冗余、选举。
- 4、**安全性**：是指系统在向合法用户提供服务的同时能够阻止非授权用户使用的企图或拒绝服务的能力。如保密性、完整性、不可抵赖性、可控性。
	- 设计策略：入侵检测、用户认证、用户授权、追踪审计。
- 5、**可修改性**：指能够快速以较高的性能价格比对系统进行变更的能力。通常以某些具体的变更为基准，通过考察这些变更的代价衡量。
- 6、**功能性**：是系统所能完成所期望的工作的能力。一项任务的完成需要系统中许多或大多数构件的相互协作。
- 7、**可变性**：指体系结构经扩充或变更而成为新体系结构的能力。这种新体系结构应该符合预先定义的规则，在某些具体方面不同于原有的体系结构。当要将某个体系结构作为一系列相关产品的基础时，可变性是很重要的。
- 8、**互操作性**：作为系统组成部分的软件不是独立存在的，经常与其他系统或自身环境相互作用。为了支持互操作性，软件体系结构必须为外部可视的功能特性和数据结构提供精心设计的软件入口。程序和用其他编程语言编写的软件系统的交互作用就是互操作性的问题，也影响应用的软件体系结构。
#### 必背概念
- **软件架构风格**是指描述特定软件系统组织方式的惯用模式。
	- **组织方式**描述了系统的组成构件和这些构件的组织方式
	- **惯用模式**则反映众多系统共有的结构和语义。
- **架构风险**是指架构设计中潜在的、存在问题的架构决策所带来的隐患。
- 风险点与非风险点不是以标准专业术语形式出现的，只是一个常规概念，即可能引起风险的因素，可称为**风险点**。
	- 某个做法如果有隐患，有可能导致一些问题，则为风险点；
	- 而如果某件事是可行的可接受的，则为非风险点。
- **敏感点**：是指为了实现某种特点的质量属性，一个或多个构件所具有的特性。
- **权衡点**：是影响多个质量属性的特性，是多个质量属性的敏感点。
#### 架构风格对比
<table>
	<tr>
		<th colspan="2">架构风格名</th>
		<th>常考关键字及实例</th>
		<th>简介</th>
	</tr>
	<tr>
		<td rowspan="2">数据流</td>
		<td>批处理</td>
		<td rowspan="2">传统编译器，每个阶段产生的结果作为下一个阶段的输入，区别在于整体。</td>
		<td>一个接一个，以<b>整体</b>为单位。</td>
	</tr>
	<tr>
		<td>管道-过滤器</td>
		<td>一个接一个，前一个输出是后一个输入。</td>
	</tr>
	<tr>
		<td rowspan="3">调用/返回</td>
		<td>主程序/子程序</td>
		<td></td>
		<td>显示调用，主程序直接调用子程序。</td>
	</tr>
	<tr>
		<td>面向对象</td>
		<td></td>
		<td>对象是构件，通过对象调用封装的方法和属性。</td>
	</tr>
	<tr>
		<td>层次结构</td>
		<td></td>
		<td>分层，每层最多影响其上下两层，有调用关系。</td>
	</tr>
	<tr>
		<td rowspan="2">独立构件</td>
		<td>进程通信</td>
		<td></td>
		<td>进程间独立的消息传递，同步异步</td>
	</tr>
	<tr>
		<td>时间驱动（隐式调用）</td>
		<td>事件触发推动动作，如语言的语法高亮、语法错误提示</td>
		<td>不直接调用，通过事件驱动</td>
	</tr>
	<tr>
		<td rowspan="2">虚拟机</td>
		<td>解释器</td>
		<td  rowspan="2">自定义流程，按流程执行，规则随时改变，灵活定义，业务灵活组合机器人。</td>
		<td解释自定义的规则，解释引擎、存储区、数据结构。></td>
	</tr>
	<tr>
		<td>规则系统</td>
		<td>规则集、规则解释器、选择器和工作内存，用于DSS和人工智能、专家系统。</td>
	</tr>
	<tr>
		<td  rowspan="3">仓库</td>
		<td>数据库</td>
		<td rowspan="2">现代编译器的集成开发环境IDE，以数据为中心。</td>
		<td>中央共享数据源，独立处理单元。</td>
	</tr>
	<tr>
		<td>超文本</td>
		<td>网状链接，多用于互联网。</td>
	</tr>
	<tr>
		<td>黑板</td>
		<td>又称为数据共享风格</td>
		<td>语音识别、知识推理等问题复杂、解空间很大、求解过程不确定的这一类软件系统，黑板、知识源、控制。</td>
	</tr>
	<tr>
		<td colspan="2">闭环--过程控制</td>
		<td>汽车巡航定速，空调温度调节，设定参数，并不断调整。</td>
		<td>发出控制命令并接受反馈，循环往复达到平衡。</td>
	</tr>
	<tr>
		<td colspan="2">C2风格</td>
		<td>构件和连接件、顶部和底部</td>
		<td>通过连接件绑定在一起按照一组规则运作的并行构件网络。</td>
	</tr>
</table>

- 常考比较的架构风格对比
<table>
	<tr>
		<th>架构风格</th>
		<th>主要特点</th>
		<th>主要有点</th>
		<th>主要缺点</th>
		<th>适合领域</th>
	</tr>
	<tr>
		<td>管道--过滤器</td>
		<td>过滤器相对独立</td>
		<td>功能模块复用；可维护性和可扩展性较强；具有并发性；模块独立性高</td>
		<td>不适于交互性强的应用，对于存在关系的数据流必须进行协调。</td>
		<td>系统可划分清晰的模块；模块相对独立；有清晰的模块接口。</td>
	</tr>
	<tr>
		<td>面向对象</td>
		<td>力争实现问题空间和软件空间结构的一致性。</td>
		<td>高度模块性；实现封装；代码共享灵活；易维护；可扩充性好</td>
		<td>增加了对象之间的依赖关系</td>
		<td>多种领域</td>
	</tr>
	<tr>
		<td>事件驱动</td>
		<td>系统由若干子系统构成且称为一个整体；系统有统一的目标；子系统有主从之分；每一个子系统有自己的时间收集和处理机制。</td>
		<td>适合描写系统组；容易实现并发处理和多任务；可扩展性好；具有类层次结构；简化代码。</td>
		<td>因为树形结构所以削弱了对系统计算的控制能力；各个对象的逻辑关系复杂</td>
		<td>一个系统对外部的表现可以从它对事件的处理表征出来。</td>
	</tr>
	<tr>
		<td>分层风格</td>
		<td>各个层次的组件形成不同功能级别的虚拟机；多层相互协同工作，而且实现透明。</td>
		<td>支持系统设计过程中的逐级抽象；可扩展性好；支持软件复用</td>
		<td>不同层次之间耦合度高的系统很难实现。</td>
		<td>适合功能层次的抽象和相互之间低耦合的系统。</td>
	</tr>
	<tr>
		<td>数据共享风格</td>
		<td>采用两个常用构件中央数据单元和一些相对独立的组件集合。</td>
		<td>中央数据单元实现了数据的集中，以数据为中心。</td>
		<td>适合于特定领域</td>
		<td>适合于专家系统等人工智能领域问题的求解。</td>
	</tr>
	<tr>
		<td>解释器风格</td>
		<td>系统核心是虚拟机</td>
		<td>可以用多种操作来解释一个句子，灵活应对自定义场景。</td>
		<td>合适于特定领域。</td>
		<td>适合于模式匹配系统与语言编译器。</td>
	</tr>
	<tr>
		<td>闭环控制风格</td>
		<td>通过不断的测量被控对象，认识和掌握被控对象；将控制理论引入体系结构构建。</td>
		<td>将控制理论引入到计算机软件体系结构中。</td>
		<td>适合于特定领域。</td>
		<td>该系统中一定存在有目标的作用、信息处理闭环控制过程。</td>
	</tr>
</table>

#### 面向服务的架构SOA
- SOA是一种设计理念，其中包含多个服务；服务之间通过相互依赖最终提供一系列完整的功能。各个服务通常以独立的形式部署运行，服务之间通过网络进行调用。
- 企业服务总线ESB	
	- 简单来说是一个管道，用来连接各个服务节点。ESB的存在是为了集成基于不同协议的不同服务，ESB做了消息的转化、解释及路由的工作，以此来让不同的服务互联互通。
	- ESB特点：
		- 1、SOA的一种实现方式，ESB在面向服务的架构中起到的是总线作用，将各种服务进行连接与整合；
		- 2、描述服务的元数据和服务注册管理；
		- 3、在服务请求者和提供者之间传递数据，以及对这些数据进行转换的能力，并支持由实现中总结出来的一些模式，如同步模式、异步模式等；
		- 4、发现、路由、匹配和选择的能力，以支持服务之间的动态交互，解耦服务请求者和服务提供者。高级一些的能力，包括对安全的支持、服务质量保证、可管理学和负载平衡等。
	- ESB的主要功能：
		- （1）服务位置透明性；
		- （2）传输协议转换；
		- （3）消息格式转换；
		- （4）消息路由；
		- （5）消息增强；
		- （6）安全性；
		- （7）监控与管理。