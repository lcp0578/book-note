## 3 数据库系统
#### 数据库分类比较
- **关系型数据库**：是建立在关系模型基础上的数据库，借助集合代数等数学概念和方法来处理数据库中的数据。
- **NoSQL**：泛指非关系型的数据库。
- **内存数据库**：将数据库整体存储在内存中，提高性能。
- 并发控制
	- 丢失更新
	- 不可重复读
	- 读脏数据
#### 封锁协议
- X锁是排他锁（写锁）。
- S所是共享锁（读锁）。
- 加锁遵循一个基本原则
	- 如果该事务只读数据，就只加读锁；如果该事务要写数据，就加写锁。
#### 不规范化带来的四大问题
- 数据冗余
- 修改异常
- 插入异常
- 删除异常

#### 反规范化技术
- 规范化设计后，数据库设计者希望牺牲部分规范化来提高性能，这种从规范化设计的回退方法称为反规范化技术。
	- （1）增加冗余列：在多个表中保留相同的列，通过增加数据冗余减少或避免查询时的连接操作。
	- （2）增加派生列：在表中增加可以由本表或其它表中数据计算生成的列，减少查询时的链接操作并避免计算或使用集合函数。
	- （3）重组新表：如果许多用户需要查看两个表连接出来的结果数据，则把这两个表重新组成一个表来减少连接而提高性能。
	- （4）水平分割表：根据一列或多列数据的值，把数据放到多个独立的表中，主要用于表数据规模很大、表中数据相对独立或数据需要存放到多个介质上时使用。
	- （5）垂直分割表：对表进行分割，将主键与部分列放到一个表中，主键与其他列放到另一个表中，在查询时减少I/O次数。
#### 分布式数据库
- 分布式数据库是由一组数据组成的，这组数据分布在计算机网络的不同计算机上，网络中每个节点具有独立处理的能力（称为场地自治），它可以执行局部应用，同时，每个节点也能通过网络通信子系统执行全局应用。
- 分布式数据库系统是在集中式数据库系统技术的基础上发展起来的，具有如下特点：
	- （1）**数据独立性**。在分布式数据库系统中，数据独立性这一特性更加重要，并具有更多的内容。处理数据的逻辑独立性与物理独立性外，还有数据分布独立性（分布透明性）。
	- （2）**集中与自治共享结合的控制结构**。各局部的DBMS可以独立地管理局部数据库，具有自治的功能。同时，系统又设有集中控制机制，协调各局部DBMS的工作，执行全局应用。
	- （3）**适当增加数据冗余度**。在不同的场地存储同一数据的多个副本，这样，可以提高系统的可靠性和可用性，同时也能提高系统性能。
	- （4）**全局的一致性、可串行性和可恢复性**。
- 分布式数据库的有点：
	- （1）分布式数据库可以解决企业部分分散而数据需要相互联系的问题。
	- （2）如果企业需要增加新的相对自主的部分来扩充机构，则分布式数据库系统可以在对当前机构影响最小的情况下进行扩充。
	- （3）分布式数据库可以满足负载均衡的需要。
	- （4）当企业已存在几个数据库系统，而且实现全局应用的必要性增加时，就可以由这些数据库自下而上构成分布式数据库系统。
	- （5）相等规模的分布式数据库系统在出现故障的概率上不会比集中式数据库低，但由于其故障的影响仅限于局部数据应用，因此，就整个系统来说，它的可靠性是比较高的。
- **数据分片**将数据库整体逻辑结构分解为合适的逻辑单位（片段），然后由分布式模式来定义片段及其副本在各场地的物理分布，其主要目的是提高访问的局部性，有利于按照用户的需求，组织数据的分布和控制数据的冗余度。
	- （1）水平分片。水平分片将一个全局关系中的元组分裂成多个子集，每个子集为一个片段。分片条件由关系中的属性值表示。对于水平分片，重构全局关系可以通过关系的并操作实现。
	- （2）垂直分片。垂直分片将一个全局关系按数据分裂成多个子集，应满足不相交性（关键字除外）。对于垂直分片，重构全局关系可通过连接运算实现。
	- （3）导出分片。导出分片又称为导出水平分片，即水平分片的条件不是本关系属性的条件，而是其他关系属性的条件。
	- （4）混合分片。混合分片是在分片中采用水平分片和垂直分片两种形式的混合。
- **分布透明性**是指用户不必关系数据的逻辑分片，不管关系数据存储的物理位置分配细节，也不必关系局部场地上的数据库的数据模型。
	- （1）分片透明性是分布透明性的最高层次，它是指用户或应用程序只对全局关系进行操作而不必考虑数据的分片。
	- （2）位置透明性。位置透明性是指用户或应用程序应当了解分片情况，但不必了解片段的存储场地。
	- （3）局部数据模型透明性。局部数据模型透明性是指用户或应用程序应当了解分片及个片段存储的场地，但不必了解局部场地上使用的是何种数据模型。

#### 数据仓库
- **数据仓库集成**是把多种来源的数据集中在一起，建立数据仓库，所有的数据都驻留在单个数据库服务器上，配置大型处理器和存储容量。
- 数据仓库主要用于决策支持，在数据处理过程中强调分析。其特点是：
	- （1）集成的数据。
	- （2）面向主题。
	- （3）数据相对稳定。
	- （4）包含历史信息。
- 数据仓库的结构通常包含四个层次：
	- （1）数据源：是数据仓库系统的基础，是整个系统的数据源泉。
	- （2）数据的存储与管理：是整个数据仓库系统的核心。
	- （3）OLAP（联机分析处理）服务器：对分析需要的数据进行有效集成，按多维模型组织，以便进行多角度、多层次的分析，并发现趋势。
	- （4）前端工具：主要包括各种报表工具、查询工具、数据分析工具、数据挖掘工具以及各种基于数据仓库或数据集市的应用开发工具。