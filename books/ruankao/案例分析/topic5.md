## 5 嵌入式系统架构设计
#### 嵌入式系统的典型架构
- **层次化模式架构**
	- 位于高层的抽象概念与低层的更加具体的概念之间存在着依赖关系。
	- 层次化模式架构主要设计思想是：
		- （1）当一个系统存在高层次的抽象，这些抽象的表现形式是一个个的抽象概念，而这些抽象概念需要具体的低层概念进行实现时，就可采用层次化模式。
		- （2）分层模式架构只包含了一个主要的元素（域包）和它的接口，以及用来说明模式结构的约束条件。
		- （3）层次化模式可以分为两种；封闭型和开放型。
			- 封闭型的特征是：一层中的对象只能调用同一层或下一层的对象提供的方法。
			- 开放型：一层中的对象可以调用同一层或低于该层的任意一层的对象提供的方法。
- **递归模式架构**
	- 递归模式解决的问题是：需要将一个非常复杂的系统进行分解，并且还要确保分解过程是可扩展的，即只要有必要，该分解过程就可以持续下去。
	- 在创建这种模式的实例时，通常使用两种相反的工作流程
		- 自顶向下：自顶向下的工作流从系统层级开始并标识结构对象，这些对象提供实现协作的服务。
			- 在实时系统和嵌入式系统中，大多数情况下是基于某个标准方法，将系统分层一个个子系统。当开发人员逐步降低抽象层级，向下推进时，容易确保开发者的工作没有偏离用例中所规定的需求。
		- 自底向上：自底向上专注于域的构造--首先确定域中的关键类和关系。
			- 这种方法之所以可行是因为：开发者以往有丰富的开发经验，并能将其他领域所获得的知识映射到当前开发所在的域中。通过这种方法，最终开发者会到达子系统级的抽象。

#### 嵌入式操作系统（EOS）
- 嵌入式操作系统（EOS）是指用于嵌入式系统的操作系统。
	- 通常包括与硬件相关的底层驱动软件、系统内核、设备驱动接口、通信协议、图形界面、标准化浏览器等。
- 嵌入式操作系统特点
	- 可裁剪性
	- 可移植性
	- 强实时性
	- 强紧凑性
	- 高质量代码
	- 强定制性
	- 标准接口
	- 强稳定性
	- 若交互性
	- 强确定性
	- 操作简洁方便
	- 较强的硬件适应性
	- 可固化性
- 从嵌入式操作系统体系架构看，主要存在4种结构
	- 整体结构
	- 层次结构
	- 客户/服务器结构
	- 面向对象结构
- 典型的强实时调度算法
	- （1）最早截止时间优先（Earliest Deadline First，EDF）算法。根据任务的开始截止时间来确定任务的优先级。截止时间愈早，其优先级愈高。
	- （2）最低松弛度优先（Least Laxity First， LLF）算法。根据任务紧急（或松弛）的程度，来确定任务的优先级。
	- （3）单调速率调度算法（Rate Monotonic Scheduling，RMS）。是一种静态优先级调度算法，是经典的周期性任务调度算法。RMS的基本思路是任务的优先级与它的周期表现为单调函数的关系，任务周期越短，优先级越高；任务周期越长，优先级越低。
- 操作系统任务之间一般存在以下关系：相互独立、竞争、同步、通信。
	- 要实现多任务间的协同工作，操作系统必须提供任务间的通信手段。嵌入式操作系统一般都会提供多任务间通信的方法，方勇的通信方式包括：
		- 共享内存：数据的简单共享。多任务访问同一地址空间。
		- 信号量：基本的互斥和同步。最优，主要手段，任务间快速通信。
		- 消息队列：同一CPU内多任务间消息传递。类似于缓冲区的对象，像一个管段接收发送者消息等待接收者读取。
		- Socket和远程调用：任务间透明的网络通信，不同计算机之间通信。
		- Signals（信号）：用于异常处理。通知进程发生了异步事件，是对中断机制的一种模拟。
- 与传统数据库相比，嵌入式数据库系统有一下几个主要特点：
	- 嵌入式
	- 实时性
	- 移动性
	- 伸缩性
- 嵌入式数据库按存储位置的不同可分为三类：
	- 基于内存方式
	- 基于文件方式
	- 基于网络方式