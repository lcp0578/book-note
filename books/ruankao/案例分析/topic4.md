## 4 面向服务架构设计
#### SOA概述和发展
- SOA架构是一个面向服务的架构，可将其视为组件模型，其将系统整体拆分为多个独立的功能模块，模块之间通过调用接口进行交互，有效整合了应用系统的各项业务功能，系统各个模块之间是松耦合的。
	- SOA架构以企业服务总线链接各个子系统，是集中式技术架构，应用服务间相互依赖导致部署复杂，应用交互使用远程通信，降低了响应速度。
- 微服务架构是SOA架构的进一步优化，去除了ESB企业服务总线，是一个真正意义上去中心化的分布式架构。
	- 其降低了微服务之间的耦合程度，不同的微服务采用不同的数据库技术，服务独立，数据源唯一，应用极易扩展和维护，同时降低了系统复杂性。

#### SOA主要协议和规范
- UDDI（统一描述、发现和集成协议）计划是一个广泛的、开放的行业计划，它使得商业实体能够彼此发现；定义它们怎样在Internet上互相作用，并在一个全球的注册体系架构中共享信息。
- WSDL（Web服务描述语言），是一个用来描述Web服务和说明如何与Web服务通信的XML语言。
	- 可描述三个基本属性：
		- 服务做些什么
		- 如何访问服务
		- 服务位于何处
- SOAP是在分散或分布式的环境中交换信息的简单的协议，是一个基于XML的协议。
	- 它包括4个部分：
		- SOAP封装，定义了一个描述消息中的内容是什么，是谁发送的，谁应当接受并处理它以及如何处理它们的框架；
		- SOAP编码规则，用于表示应用程序需要使用的数据类型的示例；
		- SOAP RPC表示是远程过程调用和应答的协定；
		- SOAP绑定是使用底层协议交换信息。
- REST（表述性状态转移）的设计不只是要适用于互联网环境，而是一个普遍的设计理念，目的是为了让不同的软件或者应用程序在任何网络环境下都可以进行信息的互相传递。
	- 包括四个要素：
		- **资源**：REST是以资源为中心构建，资源可以是一个订单，也可以是一幅图谱。将互联网中一切暴露给客户端的事物都可以看做是一种资源，对资源相关数据和表述进行组合，借助URI（统一资源标识符）标识Web上的资源。
		- **表述**：用表述描述资源在Web中某一个时间的状态。
		- **状态转移**：分为应用状态（用户请求会话信息快照）和资源状态（时间资源请求表述的快照）。
		- **超链接**：在页面中嵌入链接和其他资源建立联系。

#### SOA设计标准和原则
- SOA设计的标准要求
	- **文档标准化**：XML文档，Web描述语言。
	- **通信协议标准**：用消息进行通信，消息使用XML Schema来定义。
	- **应用程序统一登记与集成**：通过一个扮演目录列表角色的登记处来进行维护，UDDI是标准。
	- **服务质量（QoS）**：每项SOA服务都有一个与之相关的服务质量。QoS的一些关键元素有安全需求（例如认证和授权）、可靠性通信以及谁能调用服务的策略。
		- 其服务和标准包括：
			- 可靠性：“仅且仅仅传送一个”“最多传送一次”“重复消息过滤”和“保证消息传送”等特性消息的发送和确认。
			- 安全性：主要包括认证交换、消息完整性和消息保密。
			- 策略：服务提供者有时候会要求服务消费者与某种策略通信。
			- 控制：在SOA中，进程是使用一组离散的服务创建的。BPEL4WS或者WSBPEL是用来控制这些服务的语言。
			- 管理：让系统管理员管理所有，运行在多种环境下的服务的管理系统。